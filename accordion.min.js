!function(){"use strict";function e(e,t){function i(t){var n=f.getBoundingClientRect(),i=Math.round(n.bottom-n.top),o=i+"px",r=p.scrollHeight,a=r+i;return f.style.height=o,e.style.top=t?t+"px":"",u&&(f.setAttribute("aria-selected",g),f.setAttribute("aria-expanded",g),p.setAttribute("aria-hidden",!g)),c&&p.setAttribute("tabindex",g?0:-1),g?(d.height=a,a):(d.height=i,i)}var o,r,d=this,t=t||{},l=t.openClass||"open",s=t.onToggle,u=!t.disableAria,c=!t.disableKeys,h=e.classList,g=h.contains(l),f=t.heading?e.querySelector(t.heading):e.firstElementChild,p=t.content?e.querySelector(t.content):e.lastElementChild;Object.defineProperties(d,{open:{get:function(){return g},set:function(e){(e=!!e)!==g&&(g=e,h.toggle(l,e),s&&s(d))}},height:{get:function(){if(void 0===o){console.info(f.textContent+": Calculating height for the first time");var t=e.getBoundingClientRect();o=t.bottom-t.top}return o},set:function(t){e.style.height=t+"px",o=t,console.log("[%s] Height set: %s",f.textContent,o)}}}),f.addEventListener(a?"touchend":"click",function(e){return("touchend"!==e.type||e.cancelable)&&(d.open=!d.open,e.preventDefault()),!1}),c&&f.addEventListener("keydown",function(e){var t,n;switch(n=e.keyCode){case 13:d.open=!d.open;break;case 38:case 40:if(t=38===n?d.previousFold:d.nextFold)return t.heading.focus(),e.preventDefault(),!1;break;case 37:g&&(h.remove(l),d.open=!1);break;case 39:g||(h.add(l),d.open=!0);break;case 27:this.blur()}}),u&&(f.id||p.id?f.id?p.id||(p.id=f.id+"-content"):f.id=p.id+"-heading":(r=n("a"),f.id=r+"-heading",p.id=r+"-content"),f.setAttribute("role","tab"),p.setAttribute("role","tabpanel"),f.setAttribute("aria-controls",p.id),p.setAttribute("aria-labelledby",f.id)),c&&f.setAttribute("tabindex",0),this.update=i,this.heading=f,this.content=p,this.el=e}function t(t,n){function a(e){for(var n=0,i=0,o=h.length;o>i;++i)n+=e===h[i]?h[i].height:h[i].update(n);if(b&&u){var r=t.getBoundingClientRect();c.animHeight=r.bottom+(n-(r.bottom-r.top))<window.innerHeight}return!p&&g.toggle("shrinking",w>n),t.style.height=n+"px",w=n,n}function d(){for(var e,n,i,r=t,a=o.length;r&&(r=r.parentNode);)for(e=0;a>e;++e)if(i=o[e],r===i.el){for(i.childAccordions.push(c),e=0,a=i.folds.length;a>e;++e)if(n=i.folds[e],n===t||n.content.contains(t)){c.parentFold=n;break}return c.parent=i,i}return null}function l(){for(var e=0,t=h.length;t>e;++e)h[e].previousFold=h[e-1]||null,h[e].nextFold=h[e+1]||null}var u,c=this,h=[],g=t.classList,n=n||{},f=n.animClass||"anim-height",p=n.animHeight;if(p=i===p?g.contains(f):p,"auto"===p){var v,b=!0;p=!0,t.addEventListener(s,function(e){v&&"height"===e.propertyName&&e.target===t&&(g.remove(f),v=!1)})}var m=n.autoResize;m=i===m?!0:m;var A=t.children,w=0,y=function(e,t){var n={};for(var i in e)n[i]=e[i];var o=e.onToggle;return n.onToggle=function(e){var n=e.height;a();var i=e.height-n,r=c;for(console.log("Diff: %s",i);r.parentFold;)r.parentFold.height+=i,r.parent.update(r.parentFold),r=r.parent;o&&o(e,t)},n}(n,c),E=0,C=A.length,x=[];for(d(),n.disableAria||t.setAttribute("role","tablist");C>E;++E)h.push(new e(A[E],y));r.call(t.querySelectorAll("img"),function(e){e.addEventListener("load",a)}),g.toggle(f,p),m&&window.addEventListener("resize",a),Object.defineProperties(c,{update:{value:a},redinex:{value:l},findParent:{value:d},folds:{value:h},el:{value:t},childAccordions:{value:x},animHeight:{get:function(){return p},set:function(e){(e=!!e)!==p&&(p=e,e?g.add(f):v=!0)}}}),o.push(c),l(),a(),u=!0}function n(e,t,i){i=+(i||6);var o=e=e||"_";if(t){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(r+=r.toLowerCase(),o+=r[Math.round(Math.random()*(r.length-1))],r+="0123456789";o.length<i;)o+=r[Math.round(Math.random()*(r.length-1))]}else l[e]||(l[e]=0),o+=++l[e];return d[o]||document.getElementById(o)?n(e,t):(d[o]=!0,o)}var i,o=[],r=[].forEach,a="ontouchstart"in document.documentElement;t.resetRelationships=function(){for(var e,t=0,n=o.length;n>t;++t)e=o[t],e.childAccordions.length=0,e.parent=e.findParent()};var d={},l={},s=function(e){for(var t="transitionend webkitTransitionEnd oTransitionEnd otransitionend".split(" "),n=0;4>n;++n)if("on"+t[n].toLowerCase()in window)return t[n];return t[0]}();"function"==typeof IE8PP&&(t=IE8PP(t),e=IE8PP(e)),window.Accordion=t,Object.defineProperty(window,"Accordions",{get:function(){return o}})}();
